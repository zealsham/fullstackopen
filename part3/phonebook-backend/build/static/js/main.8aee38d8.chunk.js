(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(14),c=t.n(a),r=t(3),o=t(1),u=t(0),i=function(e){var n=e.onSubmit,t=e.newName,a=e.handleNewName,c=e.handlePhone,r=e.phone;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Add a new"}),"name: ",Object(u.jsx)("input",{value:t,onChange:a}),Object(u.jsx)("br",{}),"phone: ",Object(u.jsx)("input",{value:r,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},s=t(4),l=t.n(s),d="/api/persons",j=function(){return l.a.get(d).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},b=function(e){return l.a.post("".concat(d),e).then((function(e){return e.data}))},f=function(e,n){return l.a.put("".concat(d,"/").concat(n),e).then((function(e){return e.data}))},m=function(e){var n=e.data,t=e.deleteEntry;return Object(u.jsxs)("p",{children:[n.name,"  ",n.number,Object(u.jsx)("button",{onClick:t,children:"delete"})]})},O=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"error",children:n})},p=function(e){var n=e.phonelist,t=e.stateChanger,a=e.VerrorOccuring,c=Object(o.useState)(null),i=Object(r.a)(c,2),s=i[0],l=i[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{message:s||a}),n.map((function(e){return Object(u.jsx)(m,{data:e,deleteEntry:function(){return a=e.id,c=e.name,void(window.confirm("delete ".concat(c))&&(h(a).then((function(e){var c=n.filter((function(e){return e.id!==a}));t(c)})).catch((function(e){l("".concat(c," has already been deleted ")),setInterval((function(){l(null)}),5e3)})),t(n.filter((function(e){return e.id!==a})))));var a,c}},e.id)}))]})},v=function(e){var n=e.searchState,t=e.onChange;return Object(u.jsxs)(u.Fragment,{children:["fillter shown with: ",Object(u.jsx)("input",{value:n,onChange:t})]})},g=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"success",children:n})},x=(t(38),function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],a=n[1],c=Object(o.useState)("enter name to add"),s=Object(r.a)(c,2),l=s[0],d=s[1],h=Object(o.useState)("enter phone number"),m=Object(r.a)(h,2),O=m[0],x=m[1],w=Object(o.useState)(""),C=Object(r.a)(w,2),S=C[0],N=C[1],y=Object(o.useState)(null),k=Object(r.a)(y,2),E=k[0],I=k[1],L=Object(o.useState)(null),D=Object(r.a)(L,2),P=D[0],F=D[1];Object(o.useEffect)((function(){j().then((function(e){a(e)}))}),[]);var J=""===S?[]:t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})),T=J.length>=1?J:t;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(g,{message:E}),Object(u.jsx)(v,{onChange:function(e){console.log(e.target.value),N(e.target.value)},searchState:S}),Object(u.jsx)(i,{onSubmit:function(e){e.preventDefault();var n={name:l,number:O},c=t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()}));if(console.log(c),c){if(window.confirm("".concat(c.name," already exist in phone book , do you want to update the number"))){var r=c.id,o={name:c.name,number:O};return void f(o,r).then((function(e){a(t.map((function(n){return n.id!==r?n:e}))),I("".concat(c.name," phone number has been updated")),setTimeout((function(){I(null)}),6e3)})).catch((function(e){F(e.response.data.msg),setTimeout((function(){F(null)}),3e3)}))}}else b(n).then((function(e){a(t.concat(e)),I("".concat(n.name," has been added to the phonebook")),setInterval((function(){I(null)}),7e3)})).catch((function(e){console.log(e.response.data.msg),F(e.response.data.msg),setInterval((function(){F(null)}),3e3)})),d("")},newName:l,handleNewName:function(e){e.preventDefault(),d(e.target.value)},handlePhone:function(e){e.preventDefault(),x(e.target.value)},phone:O}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(p,{phonelist:T,stateChanger:a,VerrorOccuring:P})]})});c.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.8aee38d8.chunk.js.map